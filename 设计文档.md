# Pool Masters VR: 详细设计文档
## 4周开发计划

[TOC]

## 1. 项目范围与优先级

考虑到4周的开发周期，我们需要确定核心功能和可选功能，以确保项目的基本版本能够按时完成。

### 1.1 核心功能 (必须实现)
- 基础台球游戏系统 (简化版九球规则)
- 基本多人连接与同步
- 简化的角色自定义系统 (2-3个基础角色模型)
- 基础武器系统 (标准台球杆 + 2种特殊武器)
- 最小可行的积分和商城系统

### 1.2 次要功能 (如时间允许)
- 额外的角色模型和自定义选项
- 扩展武器类型
- 简单的角色技能系统
- 观战系统
- 社交功能增强

### 1.3 延伸功能 (未来开发)
- 复杂的技能系统和效果
- 高级物理特效
- 排行榜和比赛系统
- 季节性内容

## 2. 游戏核心机制详细设计

### 2.1 台球游戏规则
为简化开发，采用修改版的九球规则：
- 桌面上摆放9个球，编号1-9
- 玩家必须按照数字顺序击打球
- 任何时候击球必须先击中最小编号的球
- 将9号球击入袋中的玩家获胜
- 如果玩家将白球击入袋中，失去当前回合，对手获得额外一次击球机会

**实现优先级：** 高（第1周完成）
**技术实现：**
- 使用Unity的物理系统实现球体碰撞
- 创建简单的回合管理系统
- 实现基本的击球机制（方向与力量控制）

### 2.2 角色系统

#### 2.2.1 基础角色模型
初始实现3个基础角色：
1. **经典选手** - 传统台球选手形象
2. **魔法师** - 带有魔法元素的角色
3. **未来战士** - 科幻风格角色

每个角色包括：
- 基础3D模型
- 默认动画集（站立、瞄准、击球、胜利、失败）
- 基础材质与纹理

#### 2.2.2 角色自定义选项
简化版自定义系统包括：
- 颜色选择器（改变角色主色调）
- 2-3套可替换服装/头饰
- 简单的名称与标识系统

**实现优先级：** 中（第2-3周）
**技术实现：**
- 使用基础的角色控制器
- 实现简单的材质替换系统
- 创建基础的自定义UI界面

### 2.3 武器系统

#### 2.3.1 武器类型
初始版本包含3种武器：
1. **标准台球杆** - 基础武器，平衡的力量和准确度
2. **魔法杖** - 可以添加轻微曲线效果到球的轨迹
3. **激光瞄准器** - 提供辅助瞄准线，但力量稍弱

#### 2.3.2 武器特性
每种武器影响三个基本属性：
- **力量** - 影响击球距离
- **准确度** - 影响球的轨迹偏移
- **控制** - 影响玩家瞄准的稳定性

**实现优先级：** 中（第2-3周）
**技术实现：**
- 创建可互换的武器模型
- 实现基础的武器属性系统
- 为每种武器设计简单的视觉效果

### 2.4 简化技能系统

为每个角色设计一个基础技能：
1. **经典选手** - "专注瞄准"：暂时提高准确度
2. **魔法师** - "视野模糊"：短暂干扰对手的视野
3. **未来战士** - "力量增强"：下一次击球力量提升

**实现优先级：** 低（第3-4周，如时间允许）
**技术实现：**
- 创建基础技能触发系统
- 实现简单的效果（如视觉滤镜、参数修改）
- 添加冷却时间机制

### 2.5 积分与商城系统

#### 2.5.1 积分获取
- 完成比赛：10-30点（基于表现）
- 特殊球袋进球：5点/个
- 使用技能：2点/次

#### 2.5.2 简化商城
基础商城仅包含：
- 解锁新角色：50-100点
- 解锁新武器：30-80点
- 基础自定义选项：10-30点

**实现优先级：** 中低（第3-4周）
**技术实现：**
- 创建基础数据存储系统
- 实现简单的UI商店界面
- 创建解锁系统

## 3. 用户界面设计

### 3.1 主要界面

#### 3.1.1 大厅界面
![大厅界面草图](示意图 - 无需实际图片)
- 房间列表（加入/创建房间）
- 角色/装备选择入口
- 基础设置选项

#### 3.1.2 游戏内界面
- 最小化HUD显示：
  - 当前玩家回合指示
  - 简单分数显示
  - 技能按钮（如适用）
  - 暂停/退出选项

#### 3.1.3 商城界面
- 类别选项卡（角色/武器/自定义）
- 物品展示格
- 当前积分显示
- 购买确认对话框

**实现优先级：** 中（第2-4周，分阶段实现）
**技术实现：**
- 使用Unity UI系统
- 创建简单的3D UI元素适合VR
- 实现基础的导航功能

## 4. 网络功能设计

### 4.1 房间系统
- 创建/加入游戏房间
- 最多4名玩家（2名活跃玩家，2名观战）
- 简单的准备就绪系统

### 4.2 数据同步
需同步的关键数据：
- 球体位置与运动
- 玩家位置与动作
- 回合信息
- 技能使用与效果

### 4.3 语音通信
- 基础语音聊天功能
- 简单的静音控制

**实现优先级：** 高（第1-2周基础功能，持续优化）
**技术实现：**
- 利用Ubiq框架的网络功能
- 实现客户端预测与服务器校正
- 优化网络带宽使用

## 5. 开发时间表

### 第1周：基础系统
- **天1-2：** 项目设置与基础架构
  - 设置Unity项目与Ubiq框架
  - 创建基本场景与台球桌模型
  - 实现简单的相机控制
  
- **天3-5：** 基础台球系统
  - 实现基本物理系统（球碰撞）
  - 创建简单击球系统
  - 实现基本游戏规则

- **天6-7：** 初步网络连接
  - 设置基础的多人连接
  - 测试基本的位置同步
  - 创建简单的回合系统

**周末里程碑：** 可以连接的简单台球系统原型

### 第2周：核心游戏功能
- **天1-2：** 球体同步与规则
  - 完善球体网络同步
  - 实现完整九球规则
  - 添加基本分数系统
  
- **天3-4：** 基础UI与角色
  - 创建大厅和游戏界面
  - 实现基本角色选择
  - 添加简单的玩家表示
  
- **天5-7：** 用户体验增强
  - 改进击球系统（预览线、力量指示器）
  - 添加基本音效和反馈
  - 用户测试与调整

**周末里程碑：** 功能完整的基本多人台球游戏

### 第3周：特色系统开发
- **天1-3：** 武器系统
  - 实现3种基本武器类型
  - 创建武器属性系统
  - 添加武器视觉效果
  
- **天4-5：** 角色自定义
  - 实现基础自定义选项
  - 创建角色材质/服装替换系统
  - 开发角色选择界面
  
- **天6-7：** 商城系统
  - 创建基础积分系统
  - 实现简单的商店界面
  - 添加解锁机制

**周末里程碑：** 有特色系统的增强版本游戏

### 第4周：完善与测试
- **天1-2：** 技能系统（如时间允许）
  - 实现基础技能效果
  - 添加技能触发与冷却
  - 创建技能视觉反馈
  
- **天3-4：** 优化与Bug修复
  - 性能优化
  - 修复已知问题
  - 改进网络同步
  
- **天5-7：** 最终测试与准备
  - 进行用户测试
  - 准备演示材料
  - 完成文档与报告

**最终里程碑：** 可演示的完整游戏系统

## 6. 技术实现细节

### 6.1 必要的预制件与资源
- 基础台球桌及球体
- 3个角色模型（可从资源商店购买）
- 3种武器模型（可部分自制）
- 基础UI元素
- 简单的环境资产（房间、灯光等）

### 6.2 关键脚本清单
1. `GameManager.cs` - 管理游戏状态与规则
2. `BallController.cs` - 控制球体物理与碰撞
3. `CueController.cs` - 处理瞄准与击球
4. `NetworkManager.cs` - 处理连接与同步
5. `PlayerController.cs` - 处理玩家输入与移动
6. `CharacterCustomization.cs` - 管理角色自定义
7. `WeaponSystem.cs` - 处理武器切换与属性
8. `ScoreManager.cs` - 管理积分与解锁
9. `UIController.cs` - 控制所有UI元素
10. `SkillSystem.cs` - 管理技能触发与效果

### 6.3 关键挑战与解决方案

#### 6.3.1 物理同步
**挑战：** 确保所有玩家看到相同的球体运动
**解决方案：**
- 使用权威服务器模型，一个玩家作为主机
- 实现简单的预测系统减少延迟感
- 定期完全同步以纠正偏差

#### 6.3.2 VR交互
**挑战：** 在VR中实现直观的击球系统
**解决方案：**
- 创建基于控制器的自然瞄准系统
- 使用触发器控制力量
- 提供视觉辅助确保准确性

#### 6.3.3 兼容性
**挑战：** 同时支持VR和键盘鼠标用户
**解决方案：**
- 创建抽象输入系统
- 为不同输入设备提供不同UI体验
- 确保游戏平衡不受设备影响

## 7. 测试计划

### 7.1 单元测试
- 台球物理系统测试
- 网络同步测试
- 用户界面功能测试

### 7.2 集成测试
- 多人连接与游戏流程测试
- 装备与技能系统集成测试
- 跨平台兼容性测试

### 7.3 用户测试
- 第2周末：基础游戏测试
- 第3周末：特色系统测试
- 第4周：最终用户体验测试

## 8. 团队分工

### 8.1 角色与责任
- **成员1：** 游戏核心与物理系统
  - 台球规则实现
  - 物理系统开发
  - 游戏流程管理
  
- **成员2：** 网络与同步
  - Ubiq集成
  - 网络同步实现
  - 多人连接管理
  
- **成员3：** 角色系统与UI
  - 角色模型与自定义
  - 用户界面设计与实现
  - 商城系统
  
- **成员4：** 武器/技能与VR交互
  - 武器系统实现
  - VR控制方案
  - 技能效果开发

### 8.2 协作工具
- GitHub/GitLab用于版本控制
- Trello/Notion用于任务管理
- Discord用于团队沟通

## 9. 风险评估与应变计划

### 9.1 潜在风险
1. **技术挑战：** 网络同步问题可能难以解决
   - **应变：** 简化物理系统，减少需同步的数据
   
2. **时间压力：** 特色系统可能无法全部实现
   - **应变：** 优先核心功能，准备可选功能模块化实现
   
3. **VR开发经验：** 团队可能缺乏VR开发经验
   - **应变：** 提早开始VR控制测试，寻求TA支持

### 9.2 关键决策点
- **第1周末：** 评估基础系统，决定是否需要调整范围
- **第2周末：** 评估特色系统开发进度，可能需重新优先级
- **第3周中：** 最终确定演示范围，锁定核心功能

## 10. 结论

本设计文档提供了一个聚焦于4周开发周期的实施计划。通过优先实现核心功能，确保一个基础但完整的多人VR台球游戏体验，同时保留了适量的创新元素。

关键成功指标将是：
1. 流畅的多人台球游戏体验
2. 至少2-3个可自定义的角色
3. 2-3种具有不同特性的武器
4. 基础的积分和解锁系统

随着开发的进行，本文档可能需要调整以适应实际进展和挑战。
